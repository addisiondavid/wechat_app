(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-weather-search"],{"1bad":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABiElEQVQ4T63Uv0tWYRTA8c87uQklTfYDGnRIkXCLIIOIJkOhxUmliCAaGpKmchKjdCkIDQpqMgcRFHHRQYgQWqKGtiApaOsvkAPPhafXe+/7vuCFhwfOPed7fj8Nx/w1WvBu4DL68AN72KqzqQPewhKWsY8B3MQbvKyCVgGfJoPizu1DdgVXy6BlwOt4i96a1NbxBUcclgEf4yzuJWCkfgHf8DHJHmAQd5qdlgF3MIvdpBzRTuIdppJsBE/K0q6K8BQeJuN5PMIzzCTZAv5irp0Io4bR2XM1NfyZ0t1uBxg6m2lk1kqgUdMJjLXb5dC7iA+4ht+ZYRe+I5qy0QkwdKMxZzCdGb7Ayaw5R5itVi9qtJrSjxV8j0tNUf8HbQU8j88p9WjUc6x0ssuxAcPpIShWK2YwZvEV7idYDPgQYnxe5w7yCPuT4Tj+NEURg1wMev4rnJ3AYiFsTjnS+ZTOP+SnG/m5ix6MVkVYyGNHb6fH4XR2/8IBijuesa/tDnZd3Wv/tepyx+BD0KxEFVO7RnYAAAAASUVORK5CYII="},"1de5":function(t,n,a){"use strict";t.exports=function(t,n){return n||(n={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"442b":function(t,n,a){"use strict";var i=a("9bf5"),e=a.n(i);e.a},"63df":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA+UlEQVQ4T+XTvy5EURAH4G97HQVKOgkFWoXoPIAghEjYTq2kUEk0KCh4CaLViE4jUYn4k9B7ATLJlax17t1jbaJw6zlfZuY3t6bDX63Dnj8BR/GGu5xpqjrcxgqe0I1BbGGzCi4D37GH9YbHYzjBPo7K0BR4iNeKTk6xWtR8c1PgC/orxlrGNGZSNc3gCI4x3iKAvtwOY/mP6GoBRvLXOR1GzSVm8VyCRij32M0FF4tzmUw8GEKEMvCTlKN2Dhuo4wa9mMIaYs89xbFnpfxZNIwlLOAB59gpDvwCE7htFtv9l2P0M8zjqhFtFwwj0AN82fVvwGQu/xD8AHj2JRVvPrxZAAAAAElFTkSuQmCC"},8846:function(t,n,a){"use strict";var i=a("4ea4");a("99af"),a("caad"),a("c975"),a("a434"),a("d3b7"),a("25f0"),a("2532"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(a("34e1")),o=getApp().globalData,c={data:function(){return{isSearch:!1,result:[],value:"",hotCity:["银川市","灵武市","石嘴山市","吴忠市","固原市","中卫市"],history:[]}},computed:{curr_local:function(){return o.BASE_CONFIG.location.city}},onLoad:function(){this.history=this.getHistoryLocal()},onShow:function(){},methods:{inputHandle:function(t){var n=this,a=t.detail.value;a?e.default.getSuggestion({keyword:a,success:function(t){n.isSearch=!0,n.result=t.data},fail:function(t){console.info(t)}}):this.isSearch=!1},setLocal:function(t){var n=this.getHistoryLocal();n.includes(t)||(n.push(t),uni.setStorageSync("history",n))},getHistoryLocal:function(){return uni.getStorageSync("history")?uni.getStorageSync("history"):[]},cancelHandle:function(){uni.navigateBack()},selectItem:function(t){var n=t.currentTarget.dataset.res;console.log(n);var a={ad_info:{adcode:n.adcode},location:n.location,address_components:{city:n.city,district:n.district,street_number:n.address}};this.setGobalVar(a),uni.navigateBack()},clearHandle:function(){this.value="",this.isSearch=!1,this.result=[]},clearHistory:function(){uni.removeStorage({key:"history"}),this.history=[]},dwHandle:function(){var t=this;uni.getSetting({success:function(n){n.authSetting["scope.userLocation"]?t.getLocal():uni.authorize({scope:"scope.userLocation",success:function(){t.getLocal()},fail:function(){uni.showModal({title:"用户未授权",content:"你拒绝了授权，无法获取定位，请删除小程序，重新加载后开启授权定位！",showCancel:!1,success:function(t){t.confirm&&console.log("用户点击确定")}})}})}})},hotHandle:function(t){var n=this,a=t.currentTarget.dataset.value;this.setLocal(a),e.default.geocoder({address:a,success:function(t){console.info(t),n.setGobalVar(t.result),uni.navigateBack()}})},delHandle:function(t){var n=t.currentTarget.dataset.value,a=this.getLocal();if(a.includes(n)){var i=a.indexOf(n);a.splice(i,1),uni.setStorageSync("history",a),this.history=a}},getLocal:function(){var t=this;uni.getLocation({type:"wgs84",success:function(n){t.reverseGeocoder(n.latitude,n.longitude)}})},reverseGeocoder:function(t,n){var a=this;e.default.reverseGeocoder({location:{latitude:t,longitude:n},success:function(i){var e=i.result,c=e.ad_info.adcode,s=e.address_component,l=s.city,r=s.district;s.street_number;o.BASE_CONFIG.location.lon=n,o.BASE_CONFIG.location.lat=t,o.BASE_CONFIG.location.city="".concat(l).concat(r),o.BASE_CONFIG.location.curid=c.toString(),a.$store.dispatch("changeCurid",c.toString()),uni.navigateBack()}})},setGobalVar:function(t){var n=t.ad_info.adcode,a=t.location,i=a.lng,e=a.lat,c=t.address_components,s=c.city,l=c.district;c.street_number;o.BASE_CONFIG.location.lon=i,o.BASE_CONFIG.location.lat=e,o.BASE_CONFIG.location.city="".concat(s).concat(l),o.BASE_CONFIG.location.curid=n.toString(),this.$store.dispatch("changeCurid",n.toString())}}};n.default=c},"9bf5":function(t,n,a){var i=a("9c32");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var e=a("4f06").default;e("f0acbd4c",i,!0,{sourceMap:!1,shadowMode:!1})},"9c32":function(t,n,a){var i=a("24fb"),e=a("1de5"),o=a("63df"),c=a("bef3"),s=a("1bad");n=i(!1);var l=e(o),r=e(c),u=e(s);n.push([t.i,"uni-page-body[data-v-345007f3]{width:100%;height:100vh;background-color:#e6edf4}.search-input[data-v-345007f3]{padding:10px;display:flex}.search-input .input-wrap[data-v-345007f3]{display:flex;align-items:center;justify-content:center;margin:0 10px;font-size:%?28?%;flex:1}.search-input .icon-search[data-v-345007f3]{display:inline-block;width:20px;height:20px;margin-right:10px;background:url("+l+") no-repeat 0 0}.search-input .icon-del[data-v-345007f3]{display:inline-block;width:20px;height:20px;margin-right:10px;background:url("+r+") no-repeat 0 0}.search-input .input[data-v-345007f3]{flex:1}.search-input .cancel[data-v-345007f3]{font-size:%?28?%;border:0}.current-location[data-v-345007f3]{height:24px;line-height:24px;padding:0 10px;font-size:%?28?%}.current-location .sanjiao[data-v-345007f3]{display:inline-block;width:20px;height:20px;background:url("+u+") no-repeat 0 0;vertical-align:sub}.current-location .dw[data-v-345007f3]{float:right;padding:0 10px;text-align:center;line-height:24px;background-color:#2c79c1;border-radius:5px;font-size:%?24?%;color:#fff}.result .item[data-v-345007f3]{font-size:%?24?%;padding:10px}.history .clear[data-v-345007f3]{font-size:%?28?%}.default .title[data-v-345007f3]{display:block;padding:10px;font-size:%?28?%}.hot[data-v-345007f3],\n.history[data-v-345007f3]{width:calc(100% - 20px);margin:auto}.hot .item[data-v-345007f3],\n.history .item[data-v-345007f3]{float:left;font-size:%?28?%;width:calc((100% - 30px) / 3);margin-right:10px;margin-bottom:10px;text-align:center;line-height:30px}.hot .item[data-v-345007f3]:nth-child(3n),\n.hot .history[data-v-345007f3]:nth-child(3n){margin-right:10px}.history .icon-del[data-v-345007f3]{padding:10px}.clear-h[data-v-345007f3]{color:#d3d2d2;display:block;font-size:%?28?%;text-align:center}.clear[data-v-345007f3]{overflow:hidden}.noData[data-v-345007f3]{background-color:initial}body.?%PAGE?%[data-v-345007f3]{background-color:#e6edf4}",""]),t.exports=n},a6c0:function(t,n,a){"use strict";a.r(n);var i=a("8846"),e=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(n,t,(function(){return i[t]}))}(o);n["default"]=e.a},bef3:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABT0lEQVQ4T62Uvy8EQRTH37e98BfoVEJCIVFQzZuSZKvTUfMPoEOHf4CazlUnlPtWQyNXUIhK5y8g237lJjey9naTvctOMsXMfN9n5v2YB2l5oI7X7/dnO53OKoAwhzqSg+HM83yQJMl3lW0lME3TLoAzEZmvufCT5JH3vlc+HwOa2b2IbDaMxIOqbhW1/4Bm9ioiyw1hUfamqitx8Qc0swMROZ8QFuWHqnoxXARglmUzJD9EZC4qSJ4CWBSRbumSHsl3AMeF/S8AC865nwBM03QdwFPZUFW3zey2AO1V7AUzkhve++f4wj2SlxXuFgFSBwuuAvvOuasANLNrEdmpiV+AjnTF15blN6q62wR4p6rJRMAsy+pcflRVN4pjc5erkkLyxXu/Nm1SxsoGwAnJpanKZhSf9go7pqvVr1eAttccIrTV9hWhrTbYKTtOMPsF34vRFYqyeV0AAAAASUVORK5CYII="},e153:function(t,n,a){"use strict";var i;a.d(n,"b",(function(){return e})),a.d(n,"c",(function(){return o})),a.d(n,"a",(function(){return i}));var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"search-input"},[a("v-uni-view",{staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"iconfont icon-search"}),a("v-uni-input",{staticClass:"input",attrs:{"adjust-position":"false",placeholder:"请输入城市名,快速查询天气信息","placeholder-class":"input-p"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.inputHandle.apply(void 0,arguments)},confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.inputHandle.apply(void 0,arguments)}},model:{value:t.value,callback:function(n){t.value=n},expression:"value"}}),a("v-uni-view",{staticClass:"iconfont icon-del",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clearHandle.apply(void 0,arguments)}}})],1),a("v-uni-button",{staticClass:"cancel",attrs:{size:"mini",plain:!0},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cancelHandle.apply(void 0,arguments)}}},[t._v("取消")])],1),a("v-uni-view",{staticClass:"current-location"},[a("v-uni-text",{staticClass:"sanjiao"}),a("v-uni-text",[t._v("当前位置：")]),a("v-uni-text",[t._v(t._s(t.curr_local))]),a("v-uni-view",{staticClass:"dw",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.dwHandle.apply(void 0,arguments)}}},[t._v("重新定位")])],1),t.isSearch?a("v-uni-view",{staticClass:"result"},t._l(t.result,(function(n){return a("v-uni-view",{key:n.id,staticClass:"item",attrs:{"data-res":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectItem.apply(void 0,arguments)}}},[t._v(t._s(n.title)+",\n\t\t\t"+t._s(n.city)+",\n\t\t\t"+t._s(n.province))])})),1):a("v-uni-view",{staticClass:"default"},[a("v-uni-text",{staticClass:"title"},[t._v("宁夏回族自治区城市")]),a("v-uni-view",{staticClass:"hot clear"},t._l(t.hotCity,(function(n){return a("v-uni-view",{key:t.index,staticClass:"item",attrs:{"data-value":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.hotHandle.apply(void 0,arguments)}}},[t._v(t._s(n))])})),1),a("v-uni-text",{staticClass:"title"},[t._v("历史搜索")]),a("v-uni-view",{staticClass:"history clear"},[t._l(t.history,(function(n,i){return a("v-uni-view",{key:i,staticClass:"item",attrs:{"data-value":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.hotHandle.apply(void 0,arguments)}}},[t._v(t._s(n)),a("v-uni-text",{staticClass:"iconfont icon-del",attrs:{"data-value":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.delHandle.apply(void 0,arguments)}}})],1)})),0==t.history.length?a("v-uni-view",{staticClass:"noData"},[a("v-uni-text",[t._v("无历史数据")])],1):t._e()],2),t.history.length?a("v-uni-text",{staticClass:"clear-h",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clearHistory.apply(void 0,arguments)}}},[t._v("清空历史")]):t._e()],1)],1)},o=[]},fc92:function(t,n,a){"use strict";a.r(n);var i=a("e153"),e=a("a6c0");for(var o in e)"default"!==o&&function(t){a.d(n,t,(function(){return e[t]}))}(o);a("442b");var c,s=a("f0c5"),l=Object(s["a"])(e["default"],i["b"],i["c"],!1,null,"345007f3",null,!1,i["a"],c);n["default"]=l.exports}}]);