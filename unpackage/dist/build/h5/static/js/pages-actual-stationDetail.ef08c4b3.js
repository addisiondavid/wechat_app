(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-actual-stationDetail"],{2420:function(e,t,a){"use strict";a.r(t);var n=a("9bce"),r=a.n(n);for(var c in n)"default"!==c&&function(e){a.d(t,e,(function(){return n[e]}))}(c);t["default"]=r.a},"52f8":function(e,t,a){"use strict";a.r(t);var n=a("d188"),r=a("2420");for(var c in r)"default"!==c&&function(e){a.d(t,e,(function(){return r[e]}))}(c);a("949e");var o,i=a("f0c5"),l=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"3ab0d150",null,!1,n["a"],o);t["default"]=l.exports},"949e":function(e,t,a){"use strict";var n=a("c5ea"),r=a.n(n);r.a},"9bce":function(e,t,a){"use strict";var n=a("dbce"),r=a("4ea4");a("99af"),a("4160"),a("fb6a"),a("d3b7"),a("e25e"),a("ac1f"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var c=r(a("1da1")),o=n(a("5adf")),i=r(a("b018")),l=getApp().globalData,d={data:function(){return{ec:{disableTouch:!0,lazyLoad:!0},stat_id:-1,stat_title:"",curr_ele:"",curr_sub_ele:"",curr_ele_conf:null,eleName_conf:{PRE:{name:"降水",chartType:"bar",ac_ele:"PRE_1h",ac_datacode:"SURF_NX_MUL_HOR",fr_datacode:"SEVP_NX_WEFC_RFFC",fr_ele:"PRE_PRE_Fore",d7_ac_ele:["PRE_Time_0808"],d7_fr_ele:["PRE_24h"],chartYName:"︵\nm\nm\n︶\n量\n水\n降"},TEM:{name:"气温",chartType:"line",ac_ele:"TEM",fr_ele:"TEM",ac_datacode:"SURF_NX_MUL_HOR",fr_datacode:"SEVP_NX_WEFC_RFFC",d7_ac_ele:["TEM_Max","TEM_Min"],d7_fr_ele:["TEM_Max_24h","TEM_Min_24h"],chartYName:"︵\n℃\n︶\n度\n温"},WIN:{name:"风速",chartType:"line",ac_ele:"WIN_S_Max",fr_ele:"WIN_S",ac_datacode:"SURF_NX_MUL_HOR",fr_datacode:"SEVP_NX_WEFC_RFFC",d7_ac_ele:["WIN_S_Max"],d7_fr_ele:["WIN_S"],chartYName:"︵\ns\n.\nm\n︶\n速\n风"},V_QUAL:{name:"AQI",chartType:"bar",ac_ele:"V_QUAL",ac_datacode:"CAWN_MEE_AIR_EMO",chartYName:"\nI\nQ\nA"},PM2p5_Densty:{name:"PM2.5",chartType:"line",ac_ele:"PM2p5_Densty",ac_datacode:"CAWN_MEE_AIR_EMO",chartYName:"\n5\n.\n2\nM\nP"},PM10_Densty_Fore:{name:"PM10",chartType:"line",ac_ele:"PM10_Densty_Fore",ac_datacode:"CAWN_MEE_AIR_EMO",chartYName:"\n0\n1\nM\nP"}}}},onLoad:function(e){var t=e.Station_Id_C,a=e.V_CITY,n=e.ele,r=e.subEle;console.log("3:",n),console.log("4:",r),this.stat_id=t,this.stat_title=a,this.curr_ele=n,this.curr_sub_ele=r,this.curr_ele_conf=this.eleName_conf[this.curr_ele]||this.eleName_conf[this.curr_sub_ele]},onShow:function(){var e=this,t=uni.createSelectorQuery().in(this);t.select(".temp-echart").boundingClientRect((function(t){e.get24hData(t)})).exec(),null!=this.curr_ele_conf.d7_ac_ele?t.select(".temp-d7-echart").boundingClientRect((function(t){e.get7dData(t)})).exec():t.select(".station-d7-box").hide()},methods:{get24hData:function(e){var t=this;return(0,c.default)(regeneratorRuntime.mark((function a(){var n,r,c,o,d,s,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("empty2?",t.curr_ele_conf),n=i.default.toTimeWorld(new Date),r=n.Format("yyyyMMddhhmmss"),c=i.default.getAppointHourStr(n,-24,"yyyyMMddhhmmss"),a.next=4,t.myRequest({url:"".concat(l.API.wx_api,"/queryUdi/getEleByTimeRangeAndStaIds?dataCode=").concat(t.curr_ele_conf.ac_datacode,"&interfaceId=getEleByTimeRangeAndStaIds&StaIds=").concat(t.stat_id,"&timeRange=%5B").concat(c,",").concat(r,"%5D&elements=Datetime,").concat(t.curr_ele_conf.ac_ele,"&orderBy=Datetime")});case 4:if(o=a.sent,null==t.curr_ele_conf.fr_datacode){a.next=13;break}return d=parseInt(n.Format("hh")),s=i.default.getAppointHourStr(n,0,"yyyyMMdd000000"),(d>20||0==d)&&(s=i.default.getAppointDateStr(n,-1,"yyyyMMdd120000")),a.next=11,t.myRequest({url:"".concat(l.API.wx_api,"/queryUdi/getEleByTimeAndStaIds?dataCode=").concat(t.curr_ele_conf.fr_datacode,"&interfaceId=getEleByTimeAndStaIds&times=").concat(s,"&StaIds=").concat(t.stat_id,"&elements=").concat(t.curr_ele_conf.fr_ele,",Validtime,Datetime&orderBy=Validtime&eleValueRanges=Prod_Code:SCMOC")});case 11:_=a.sent,t.init24hEchart([o.data.DS,_.data.DS],e.width,e.height);case 13:t.init24hEchart([o.data.DS,[]],e.width,e.height);case 14:case"end":return a.stop()}}),a)})))()},get7dData:function(e){var t=this;return(0,c.default)(regeneratorRuntime.mark((function a(){var n,r,c,o,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=i.default.toTimeWorld(new Date),n.Format("yyyyMMddhhmmss"),r=i.default.getAppointDateStr(n,-1,"yyyyMMdd235959"),c=i.default.getAppointDateStr(n,-8,"yyyyMMddhhmmss"),a.next=3,t.myRequest({url:"".concat(l.API.wx_api,"/queryUdi/getEleByTimeRangeAndStaIds?dataCode=SURF_NX_MUL_DAY&interfaceId=getEleByTimeRangeAndStaIds&StaIds=").concat(t.stat_id,"&timeRange=%5B").concat(c,",").concat(r,"%5D&elements=Datetime,Station_Id_C,").concat(t.curr_ele_conf.d7_ac_ele.join(","),"&orderBy=Datetime")});case 3:return o=a.sent,a.next=6,t.myRequest({url:"".concat(l.API.wx_api,"/queryUdi/getEleByTimeAndStaIds?dataCode=SEVP_NX_WEFC_RFFC&interfaceId=getEleByTimeAndStaIds&times=").concat(n.Format("yyyyMMdd000000"),"&StaIds=").concat(t.stat_id,"&elements=").concat(t.curr_ele_conf.d7_fr_ele.join(","),",Validtime,Datetime&orderBy=Validtime&eleValueRanges=Prod_Code:SCMOC")});case 6:d=a.sent,t.init7dEchart([o.data.DS,d.data.DS],e.width,e.height);case 8:case"end":return a.stop()}}),a)})))()},init24hEchart:function(e,t,a){var n=this,r=[],c=[];if(e[0].length>0&&e[0].forEach((function(e){r.push(i.default.toTimeZone(e.Datetime,0,"hh:mm")),999999==e[n.curr_ele_conf.ac_ele]?c.push(0):"优"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#1EF875"}}):"良"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#E4F33E"}}):"轻度污染"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#E4993E"}}):"中度污染"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#F10617"}}):"重度污染"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#99074E"}}):"严重污染"==e[n.curr_ele_conf.ac_ele]?c.push({value:10,itemStyle:{color:"#860022"}}):c.push(e[n.curr_ele_conf.ac_ele])})),e[1].length>0){var l=(parseInt((new Date).Format("hh"))-8)%3,d=e[1].slice(l,l+24);d.forEach((function(e){r.push(i.default.toTimeZone(e.Datetime,e.Validtime,"hh:mm")),c.push(999999==e[n.curr_ele_conf.fr_ele]?0:e[n.curr_ele_conf.fr_ele])}))}var s=Math.ceil(Math.max.apply(Math,c)),_=0,u=0;this.$refs["ec-canvas"].init((function(i){var l=o.init(i,null,{width:t,height:a}),d={grid:{top:10,left:10,right:5,bottom:10,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:r,axisTick:{length:10},axisLabel:{fontSize:12,interval:2,rotate:45,color:"#7e7e7e"},axisLine:{onZero:!1}},{type:"category",data:[{value:"实况",textStyle:{fontSize:16,fontWeight:100,lineHeight:70,color:"#7e7e7e"}}],position:"top",axisTick:{show:!1},splitArea:{show:!0,areaStyle:{color:["#f4f9ff"]}},axisLine:{onZero:!1}}],yAxis:{type:"value",name:n.curr_ele_conf.chartYName,max:s+.1,nameTextStyle:{fontSize:12,nameLocation:"left",padding:[200,50,-170,0]},splitLine:{show:!1}},series:[{type:n.curr_ele_conf.chartType,data:c,barWidth:5,itemStyle:{normal:{color:"#96c97c"}},label:{show:!1,position:"top",textStyle:{color:"#000000"},formatter:function(e){var t=s<1?.1:1;return Math.abs(e.data-u)>t||e.dataIndex-_>2?(_=e.dataIndex,u=e.data,u):""}}}]};return e[1].length>0&&(d.xAxis[1].data.push({value:"预报",textStyle:{fontSize:16,fontWeight:100,lineHeight:70,color:"#7e7e7e"}}),d.xAxis[1].splitArea.areaStyle.color.push("#c5d9f2")),l.setOption(d),l}))},init7dEchart:function(e,t,a){var n=this,r=[],c=[],l=[];e[0].length>0&&e[0].forEach((function(e){r.push(i.default.toTimeZone(e.Datetime,0,"MM/dd"));var t=e[n.curr_ele_conf.d7_ac_ele[0]]>=5e5?0:e[n.curr_ele_conf.d7_ac_ele[0]];if(c.push(t),n.curr_ele_conf.d7_ac_ele[1]){var a=e[n.curr_ele_conf.d7_ac_ele[1]]>=5e5?0:e[n.curr_ele_conf.d7_ac_ele[1]];l.push(a)}})),e[1].length>0&&e[1].forEach((function(e){if(e.Validtime%24==0){r.push(i.default.toTimeZone(e.Datetime,e.Validtime,"MM/dd"));var t=e[n.curr_ele_conf.d7_fr_ele[0]]>=5e5?0:e[n.curr_ele_conf.d7_fr_ele[0]];if(c.push(t),n.curr_ele_conf.d7_fr_ele[1]){var a=e[n.curr_ele_conf.d7_fr_ele[1]]>=5e5?0:e[n.curr_ele_conf.d7_fr_ele[1]];l.push(a)}}})),this.$refs["ec-d7-canvas"].init((function(i){var d=o.init(i,null,{width:t,height:a});console.log(d);var s={grid:{top:10,left:10,right:5,bottom:10,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:r,axisTick:{length:10},axisLabel:{fontSize:12,rotate:45,color:"#7e7e7e"},axisLine:{onZero:!1}},{type:"category",data:[{value:"实况",textStyle:{fontSize:16,fontWeight:100,lineHeight:70,color:"#7e7e7e"}}],position:"top",axisTick:{show:!1},splitArea:{show:!0,areaStyle:{color:["#f4f9ff"]}},axisLine:{onZero:!1}}],yAxis:{type:"value",name:n.curr_ele_conf.chartYName,nameTextStyle:{fontSize:12,nameLocation:"left",padding:[200,50,-160,0]},splitLine:{show:!1}},series:[{type:n.curr_ele_conf.chartType,data:c,barWidth:10,itemStyle:{normal:{color:"#f3c265"}},label:{show:!0,position:"top",textStyle:{color:"#000000"}}}]};return e[1].length>0&&(s.xAxis[1].data.push({value:"预报",textStyle:{fontSize:16,fontWeight:100,lineHeight:70,color:"#7e7e7e"}}),s.xAxis[1].splitArea.areaStyle.color.push("#c5d9f2")),n.curr_ele_conf.d7_ac_ele[1]&&s.series.push({type:n.curr_ele_conf.chartType,data:l,barWidth:10,itemStyle:{normal:{color:"#96c97c"}},label:{show:!0,position:"top",textStyle:{color:"#000000"}}}),d.setOption(s),d}))},myRequest:function(e){return new Promise((function(t,a){uni.request({url:e.url,data:e.params||{},method:e.method||"GET",success:function(e){t(e)},fail:function(e){uni.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),a(null)}})}))}}};t.default=d},abf5:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-3ab0d150]{background-color:#fff}.container[data-v-3ab0d150]{width:auto;padding:10px;font-size:%?32?%}.station-title[data-v-3ab0d150]{padding-bottom:5px;margin-bottom:10px;border-bottom:#333 solid 1px}.h24-box__wrap[data-v-3ab0d150]{border-bottom:#333 solid 1px}.h24-box__wrap .temp-echart-view[data-v-3ab0d150]{width:100%;height:320px}.h24-box__wrap .temp-echart-view .temp-echart[data-v-3ab0d150]{width:100%;height:100%}.station-d7-box[data-v-3ab0d150]{margin-top:10px}.station-d7-box .d7-box__wrap .temp-d7-echart-view[data-v-3ab0d150]{width:100%;height:280px}.station-d7-box .d7-box__wrap .temp-d7-echart-view .temp-d7-echart[data-v-3ab0d150]{width:100%;height:100%}.hide7Day[data-v-3ab0d150]{display:none}body.?%PAGE?%[data-v-3ab0d150]{background-color:#fff}",""]),e.exports=t},c5ea:function(e,t,a){var n=a("abf5");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("43554bea",n,!0,{sourceMap:!1,shadowMode:!1})},d188:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return n}));var n={ecCanvas:a("b22f").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"station-title"},[a("v-uni-text",[e._v(e._s(e.stat_title))])],1),a("v-uni-view",{staticClass:"station-h24-box"},[a("v-uni-view",{staticClass:"h24-box__title"},[a("v-uni-text",[e._v("近24小时"+e._s(e.curr_ele_conf.name)+"统计与"+e._s(e.curr_ele_conf.name)+"预报")])],1),a("v-uni-scroll-view",{staticClass:"h24-box__wrap",attrs:{"scroll-x":"true","scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"temp-echart-view"},[a("ec-canvas",{ref:"ec-canvas",staticClass:"temp-echart",attrs:{id:"temp-echart","canvas-id":"temp-echart",ec:e.ec}})],1)],1)],1),a("v-uni-view",{staticClass:"station-d7-box"},[a("v-uni-view",{staticClass:"d7-box__title",class:{hide7Day:null==e.curr_ele_conf.d7_ac_ele}},[a("v-uni-text",[e._v("近7天"+e._s(e.curr_ele_conf.name)+"统计")])],1),a("v-uni-scroll-view",{staticClass:"d7-box__wrap",attrs:{"scroll-x":"true","scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"temp-d7-echart-view"},[a("ec-canvas",{ref:"ec-d7-canvas",staticClass:"temp-d7-echart",attrs:{id:"temp-d7-echart","canvas-id":"temp-d7-echart",ec:e.ec}})],1)],1)],1)],1)},c=[]}}]);