(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-weather-index"],{"016c":function(t,e,a){var i=a("24fb"),n=a("1de5"),r=a("bb1e");e=i(!1);var s=n(r);e.push([t.i,"uni-page-body[data-v-7afb0692]{width:100%;height:100vh;background:linear-gradient(180deg,#62b8f6,#2c79c1 77.96%)}.container[data-v-7afb0692]{padding:10px 10px 5px;background:linear-gradient(180deg,#62b8f6,#2c79c1 77.96%)}.title[data-v-7afb0692]{font-size:%?40?%;font-weight:700;color:#333}.city-weather_current[data-v-7afb0692]{padding:0 10px;background:rgba(10,47,73,.3);border-radius:15px;color:#fff}.city-weather_current .city-weather-current-day[data-v-7afb0692]{padding-top:15px}.city-weather_current .city-weather-current-day .row[data-v-7afb0692]{text-align:center}.city-weather_current .city-weather-current-day .city-weather-current__source[data-v-7afb0692]{padding-right:10px;margin-bottom:15px;text-align:right;font-size:%?24?%}.city-weather_current .city-weather-current-day .city-weather-current__source .current-location[data-v-7afb0692]{text-align:center}.city-weather_current .city-weather-current-day .city-weather-current__source .current-location .sanjiao[data-v-7afb0692]{display:inline-block;width:14px;height:14px;background:url("+s+") no-repeat 0 0;vertical-align:sub}.city-weather_current .city-weather-current-day .city-weather-current__condition[data-v-7afb0692]{display:flex;justify-content:space-between;align-items:center;padding:0 15px;font-size:%?28?%}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-img uni-image[data-v-7afb0692]{width:%?200?%;max-height:100px}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info > uni-view[data-v-7afb0692]{margin-bottom:15px}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info uni-text[data-v-7afb0692]{font-family:Poppins;font-style:normal;font-weight:400;font-size:%?32?%}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info .wea-info__date .date-split-line[data-v-7afb0692]{display:inline-block;width:2px;height:20px;margin:0 15px;background-color:#fff;vertical-align:sub}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info .wea-info__tmp[data-v-7afb0692]{height:55px;line-height:55px}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info .wea-info__tmp .condition__tmp[data-v-7afb0692]{font-weight:600;font-size:%?130?%}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info .wea-info__tmp .condition__unit[data-v-7afb0692]{font-size:%?100?%}.city-weather_current .city-weather-current-day .city-weather-current__condition .condition__wea-info .wea-info__data-time uni-text[data-v-7afb0692]{font-size:%?28?%}.city-weather_current .city-weather-current-day .city-weather-current__basic[data-v-7afb0692]{display:flex;flex-direction:row;justify-content:space-between;padding:0 5px;border-top:#fff solid 1px}.city-weather_current .city-weather-current-day .city-weather-current__basic uni-image[data-v-7afb0692]{width:32px;height:32px;vertical-align:middle}.city-weather_current .city-weather-current-day .city-weather-current__basic .list-block[data-v-7afb0692]{display:flex;align-items:center;padding:10px 0 20px;position:relative;font-size:%?32?%}.city-weather_current .city-weather-current-day .city-weather-current__basic .list-block uni-text[data-v-7afb0692]{display:block;font-family:Poppins;font-style:normal;font-weight:400;font-size:%?28?%}.city-weather_current .city-weather-current-day .city-weather-current__basic .list-block .column[data-v-7afb0692]{margin:0 3px}.city-weather_current .city-weather-current-day .city-weather-current__near[data-v-7afb0692]{padding:10px 10px 20px;text-align:left}.city-weather_current .city-weather-current-day .city-weather-current__near .near__title[data-v-7afb0692]{margin-right:10px;color:#fff}.city-weather_current .city-weather-current-day .city-weather-current__near .near__tip[data-v-7afb0692]{font-size:%?32?%}.city-weather_nearforecast[data-v-7afb0692]{margin-top:15px;padding:15px;background:rgba(10,47,73,.3);border-radius:15px}.city-weather_nearforecast .nearforecast__title[data-v-7afb0692]{margin-bottom:10px;font-family:Poppins;font-style:normal;font-size:%?32?%;font-weight:700;color:#fff}.city-weather_nearforecast .nearforecast__list[data-v-7afb0692]{display:flex}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item[data-v-7afb0692]{margin:0 %?36?%;text-align:center;color:#fff}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item > uni-view[data-v-7afb0692]{margin:2px 0;font-size:%?28?%;white-space:nowrap}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item uni-image[data-v-7afb0692]{width:26px;height:26px}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item .list_item_wea[data-v-7afb0692]{height:26px;margin:0}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item .list_item_time[data-v-7afb0692]{white-space:nowrap;font-size:%?24?%}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item .list_item_temp[data-v-7afb0692]{font-size:%?36?%;color:#fff}.city-weather_nearforecast .nearforecast__list .nearforecast__list_item .list_item_ws[data-v-7afb0692]{color:#fff}.city-weather_sevenforecast[data-v-7afb0692]{padding:15px 15px 0;margin-top:15px;background:rgba(10,47,73,.3);border-radius:15px}.city-weather_sevenforecast .title[data-v-7afb0692]{margin-bottom:10px;font-family:Poppins;font-style:normal;font-size:%?32?%;font-weight:700;color:#fff}.city-weather_sevenforecast .days-wrap[data-v-7afb0692]{width:100%}.city-weather_sevenforecast .days-wrap .days[data-v-7afb0692]{position:relative;display:flex}.city-weather_sevenforecast .days-wrap .days .days-item[data-v-7afb0692]{float:left;width:20%;text-align:center;padding:15px 0;font-size:%?28?%}.city-weather_sevenforecast .days-wrap .days .week[data-v-7afb0692]{margin-bottom:5px;color:#fff}.city-weather_sevenforecast .days-wrap .days .we-today[data-v-7afb0692]{color:#fff;display:inline-block;width:20px;height:20px;line-height:20px;border-radius:50%;background-color:#6ab1e0}.city-weather_sevenforecast .days-wrap .days .date[data-v-7afb0692]{margin-bottom:5px;color:#fff;font-size:%?24?%}.city-weather_sevenforecast .days-wrap .days .wea[data-v-7afb0692]{white-space:nowrap;margin-bottom:5px;color:#fff}.city-weather_sevenforecast .days-wrap .days .win[data-v-7afb0692],\n.city-weather_sevenforecast .days-wrap .days .speed[data-v-7afb0692]{white-space:nowrap;font-size:%?24?%;color:#fff}.city-weather_sevenforecast .days-wrap .days .speed[data-v-7afb0692]{margin-bottom:5px}.city-weather_sevenforecast .days-wrap .days .img[data-v-7afb0692]{width:20px;height:20px;margin:auto}.city-weather_sevenforecast .days-wrap .days .temp-echart-view[data-v-7afb0692]{position:absolute;width:100%;height:130px;top:110px;left:0;right:0}.city-weather_sevenforecast .days-wrap .days .temp-echart-view .temp-echart[data-v-7afb0692]{width:100%;height:100%}.city-weather_sevenforecast .days-wrap .temp-echart-bg[data-v-7afb0692]{width:100%;height:120px}.city-weather_airquality[data-v-7afb0692]{padding:15px 0 5px;margin:15px 0;background:rgba(10,47,73,.3);border-radius:15px;font-family:Poppins;font-style:normal}.city-weather_airquality .title[data-v-7afb0692]{padding:0 15px;font-family:Poppins;font-style:normal;font-size:%?32?%;font-weight:700;color:#fff}.city-weather_airquality .airquality-wrap[data-v-7afb0692]{overflow:hidden}.city-weather_airquality .airquality-wrap .airquality[data-v-7afb0692]{float:left;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center}.city-weather_airquality .airquality-wrap .airquality .name[data-v-7afb0692]{display:block;font-size:%?28?%;width:100%;text-align:center;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.city-weather_airquality .airquality-wrap .airquality .value[data-v-7afb0692]{display:block;font-size:%?22?%;color:#fff}.city-weather_airquality .airquality-wrap .airquality .img[data-v-7afb0692]{width:25px;height:25px;margin-bottom:5px}body.?%PAGE?%[data-v-7afb0692]{background:linear-gradient(180deg,#62b8f6,#2c79c1 77.96%)}",""]),t.exports=e},"0374":function(t,e,a){var i=a("016c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("4bc20cb5",i,!0,{sourceMap:!1,shadowMode:!1})},"1d6c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEtSURBVHgBzVTRTcMwELUj/gkT4BGyAd6AjNANyAbNCN0ANugIhQnoBjETlA0OH32WXhwnbaWq6pNOdt7dS3zn3FlTgIjUcfHRfqMFa20wpxBFb9EOMsb6lGhNwTtYQjcnchTkiffgDkhhIkwBu4IvfblNXEV+hzUUDvSDtS4JL8L1hTGfRgs2538w89iaY05Plwrdgu+einMT4fMZ8eN/FXeW0IP7B/Y9+RsWDpnIU+AK3AbPQxK1TGQ9KdzI9AHPb+qynsxR05E3FSWs86VZKIz2YsD+scoqFhaEwWT9uMf+NU4z3X8WRPvoU/4Fz18GZ09TrUWeH+DU3hGzQoxyzqBaHRVhMs1kPDL73MmXPMhxQG1lPGN7UwKOM8gU30ITTmFnXqDX4qgwIY/5A84QxU35eX0gAAAAAElFTkSuQmCC"},"1de5":function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"2a15":function(t,e,a){"use strict";a.r(e);var i=a("2b7b"),n=a("5fc6");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("c348");var s,c=a("f0c5"),o=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"7afb0692",null,!1,i["a"],s);e["default"]=o.exports},"2b7b":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={ecCanvas:a("b22f").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"city-weather_current"},[t.basic?i("v-uni-view",{staticClass:"city-weather-current-day city-weather-current-cloudy-day"},[i("v-uni-view",{staticClass:"row city-weather-current__source"},[i("v-uni-view",{staticClass:"current-location",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToSearch.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.currentCity))]),i("v-uni-text",{staticClass:"sanjiao"})],1)],1),i("v-uni-view",{staticClass:"row city-weather-current__condition"},[i("v-uni-view",{staticClass:"condition__wea-img"},[i("v-uni-image",{attrs:{src:t.weaImg,mode:"heightFix"}})],1),i("v-uni-view",{staticClass:"condition__wea-info"},[i("v-uni-view",{staticClass:"wea-info__date"},[i("v-uni-text",[t._v(t._s(t.infoDate.week))]),i("v-uni-text",{staticClass:"date-split-line"}),i("v-uni-text",[t._v(t._s(t.infoDate.date))])],1),i("v-uni-view",{staticClass:"wea-info__tmp"},[i("v-uni-text",{staticClass:"condition__tmp"},[t._v(t._s(t.basic["TEM"]))]),i("v-uni-text",{staticClass:"condition__unit"},[t._v("℃")])],1),i("v-uni-view",{staticClass:"wea-info__data-time"},[i("v-uni-text",[t._v("更新时间："+t._s(t.basic["Time"]))])],1)],1)],1),i("v-uni-view",{staticClass:"row city-weather-current__basic"},[i("v-uni-view",{staticClass:"list-block"},[i("v-uni-view",{staticClass:"column"},[i("v-uni-image",{attrs:{src:a("d4cb"),mode:"heightFix"}})],1),i("v-uni-view",{staticClass:"column"},[i("v-uni-text",{staticClass:"basic_item__value"},[t._v(t._s(t.QueryWinDir(t.basic["WIN_D_S_Max"]))+t._s(t.QueryWinSpeed(t.basic["WIN_S_Max"])))]),i("v-uni-text",[t._v("风")])],1)],1),i("v-uni-view",{staticClass:"list-block"},[i("v-uni-view",{staticClass:"column"},[i("v-uni-image",{attrs:{src:a("1d6c"),mode:"heightFix"}})],1),i("v-uni-view",{staticClass:"column"},[i("v-uni-text",{staticClass:"basic_item__value"},[t._v(t._s(t.basic["PRS"])+"hPa")]),i("v-uni-text",[t._v("气压")])],1)],1),i("v-uni-view",{staticClass:"list-block"},[i("v-uni-view",{staticClass:"column"},[i("v-uni-image",{attrs:{src:a("c7b4"),mode:"heightFix"}})],1),i("v-uni-view",{staticClass:"column"},[i("v-uni-text",{staticClass:"basic_item__value"},[t._v(t._s(t.basic["RHU"])+"%")]),i("v-uni-text",[t._v("湿度")])],1)],1)],1)],1):t._e()],1),t.nearForcestData?i("v-uni-view",{staticClass:"city-weather_nearforecast"},[i("v-uni-view",{staticClass:"title nearforecast__title"},[i("v-uni-text",[t._v("逐小时预报")])],1),i("v-uni-scroll-view",{attrs:{"scroll-x":"true","scroll-with-animation":!0}},[i("v-uni-view",{staticClass:"nearforecast__list"},t._l(t.nearForcestData,(function(e,a){return i("v-uni-view",{key:e["Validtime"],staticClass:"nearforecast__list_item"},[i("v-uni-view",{staticClass:"list_item_time"},[t._v(t._s(t.formatNearForcestData(e["Validtime"]).time))]),i("v-uni-view",{staticClass:"list_item_temp"},[t._v(t._s(e["TEM"]?parseFloat(e["TEM"]).toFixed(1):"--")+"℃")]),i("v-uni-view",{staticClass:"list_item_ws"},[t._v(t._s(t.QueryWinS(e["WIN_U"],e["WIN_V"])))]),i("v-uni-view",{staticClass:"list_item_wd"},[t._v(t._s(t.QueryWinD(e["WIN_U"],e["WIN_V"])))])],1)})),1)],1)],1):t._e(),"{}"!=JSON.stringify(t.sevenData)?i("v-uni-view",{staticClass:"city-weather_sevenforecast"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",[t._v("逐日预报")])],1),i("v-uni-scroll-view",{staticClass:"days-wrap",attrs:{"scroll-x":"true","scroll-with-animation":!0}},[i("v-uni-view",{staticClass:"days",style:{width:t.sevenData.daysWidth}},[t._l(t.sevenData.day7,(function(e){return i("v-uni-view",{key:e.date,staticClass:"days-item",class:e.isToday?"today-bg":"",style:{width:e.width}},[i("v-uni-view",{staticClass:"top-wrap"},[i("v-uni-view",{staticClass:"top"},[e.isToday?i("v-uni-view",{staticClass:"week"},[i("v-uni-text",{staticClass:"we-today"},[t._v("今")])],1):i("v-uni-view",{staticClass:"week"},[t._v(t._s(e.week))]),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.date))]),i("v-uni-view",{staticClass:"wea"},[t._v(t._s(e["wea"][0]))]),i("v-uni-image",{staticClass:"img",attrs:{src:e.src[0]}})],1)],1),i("v-uni-view",{staticClass:"temp-echart-bg"}),i("v-uni-view",{staticClass:"bottom-wrap"},[i("v-uni-view",{staticClass:"bottom"},[i("v-uni-image",{staticClass:"img",attrs:{src:e.src[1]}}),e?i("v-uni-view",{staticClass:"wea"},[t._v(t._s(e["wea"][1]))]):t._e(),e?i("v-uni-view",{staticClass:"win"},[t._v(t._s(t.QueryWinDir(e["win"])))]):t._e(),e?i("v-uni-view",{staticClass:"speed"},[t._v(t._s(t.QueryWinSpeed(e["speed"])))]):t._e()],1)],1)],1)})),i("v-uni-view",{staticClass:"temp-echart-view"},[i("ec-canvas",{ref:"ec-canvas",staticClass:"temp-echart",attrs:{id:"temp-echart","canvas-id":"temp-echart",ec:t.ec}})],1)],2)],1)],1):t._e(),t.airqualityData?i("v-uni-view",{staticClass:"city-weather_airquality"},[i("v-uni-view",{staticClass:"title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toogleAirqualityState.apply(void 0,arguments)}}},[i("v-uni-text",[t._v("空气质量")])],1),i("v-uni-view",{staticClass:"airquality-wrap clear"},t._l(t.airqualityData,(function(e,a){return a<t.airqualityStateLength?i("v-uni-view",{key:e.name,staticClass:"airquality",style:e.style},[i("v-uni-text",{staticClass:"name"},[t._v(t._s(t.GetEleName(e.name)))]),i("v-uni-text",{staticClass:"value"},[t._v(t._s(t.DataCheck(e.value)))])],1):t._e()})),1)],1):t._e()],1)},r=[]},"5fc6":function(t,e,a){"use strict";a.r(e);var i=a("cf06"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},bb1e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAa0lEQVQ4T8WSsQ2AMAwE/3ahYwmWgCFhAFqmoGEN+keRCFIUAiINLm2f/l82qiwqOf0M2u6erANLnF9WbTeStpfMLbCGnSSj7V7SWIAHYMoUY6MAJ1CmWIAzqAiGwam8A/Od9Z/v+OX9qq0eUbIdD6zODbIAAAAASUVORK5CYII="},c348:function(t,e,a){"use strict";var i=a("0374"),n=a.n(i);n.a},c7b4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGVSURBVHgB7ZbtUcMwDIbfMEE2IBsAE5ANyAZkA7pBs0GPCZoNOCZImaBskGxANzBKK12Fr3X9kZQf8Nz5fPmwXlmWZQP/JGCMWVCr8RuQ8MocWeOakOCShb+4jSxxDUioVDOvrOcSc0ICBbWexRr1vlERKTAXZLxjoTfHtw5zQIZfWKA/NUuOjuTDAlNiGa8d/1WzLMW4zXy327g8ky6FynKvWVnRKpHKqaz3GNNMEgU1+z5wXD5JFNTWqhFIchR4LYUCgVhRyM/9d+OwUXLfZlk2IBAas6Nuw481Ihx44v4D8bxzXyIUlf33iEQtY1ASy+A9CIRFG8mbWDspDjS6blyy48qBgQ3cIow7Ga+yf4dYB4gHeMJhr/hxQ03y5xMRDkj2l7gsnHPFk6Lzylv32bLlj8pg5yGkdovQsUNJhUyMt2xga85UM+VAJyWbHdjy+/gbMxvqlROFx5hCifcm9WJifl5E9zMyh1Myt/4Zb0Mrc6z/6eKWQGv8WRvHAaTJEADPqKb2iMMWE5GB25jtUYfX3+UbbVaoJtzCeCwAAAAASUVORK5CYII="},cf06:function(t,e,a){"use strict";var i=a("dbce"),n=a("4ea4");a("99af"),a("fb6a"),a("a9e3"),a("d3b7"),a("e25e"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("ade3"));a("96cf");var s=n(a("1da1")),c=i(a("5adf")),o=n(a("b018")),l=a("653a"),d=getApp().globalData,u={data:function(){return{basic:{},currentCity:d.BASE_CONFIG.location.city,infoDate:{week:o.default.getWeekDate(),date:(new Date).Format("MM月dd日")},nearForcestData:null,nearForcestDate:[],weaImg:null,BJDate:new Date,sevenData:{},ec:{disableTouch:!0,lazyLoad:!0},QueryWeather:l.queryWeather,QueryWeather2:l.queryWeather2,QueryWinD:l.queryWinD,QueryWinS:l.queryWinS,QueryWinDir:l.queryWinDir,QueryWinSpeed:l.queryWinSpeed,DataCheck:l.dataCheck,GetEleName:l.getEleName,airqualityData:null,airqualityState:!0,airqualityStateLength:0}},onShow:function(){var t=this;this.currentCity=d.BASE_CONFIG.location.city,uni.showToast({title:"加载中",icon:"loading",duration:1e4}),this.getNow((function(e){uni.hideToast(),t.basic=e.DS[0],t.basic["Time"]=t.basic["Datetime"].substr(6,2)+"日"+t.basic["Datetime"].substr(8,2)+"时"})),this.getNearForcest((function(e){uni.hideToast(),t.nearForcestData=e.slice(1,24),console.log("nearForcestData:",e.slice(0,24))})),this.getSevenForecast((function(e){uni.hideToast(),t.sevenData=t.formatSevenDayData(e),console.info("sevenData",t.sevenData),t.weaImg="/static/images/weather/".concat((o.default.isDaylight()?(0,l.queryWeather)(t.sevenData.day7[0].wea[0],"n").image:(0,l.queryWeather)(t.sevenData.day7[0].wea[1],"d")).image,".png"),t.$nextTick((function(){var e=uni.createSelectorQuery().in(t);e.select(".temp-echart").boundingClientRect((function(e){t.init7DayEchart(t.sevenData.day7,e.width,e.height)})).exec()}))})),this.getAirqualityForecast((function(e){uni.hideToast(),t.airqualityData=t.formatAirqualityData(e),t.airqualityStateLength=t.airqualityData.length}))},methods:{getNow:function(t){var e=o.default.toTimeWorld(this.BJDate),a=e.Format("yyyyMMddhhmmss"),i=o.default.getAppointHourStr(e,-2,"yyyyMMddhhmmss");uni.request({url:"".concat(d.API.wx_api,"/queryUdi/getEleByTimeRangeAndRadius?interfaceId=getEleByTimeRangeAndRadius&dataCode=SURF_NX_MUL_HOR&timeRange=%5B").concat(i,",").concat(a,"%5D&elements=Datetime,Station_Id_C,TEM,PRE_1h,PRE_24h,WIN_D_S_Max,WIN_S_Max,PRS,RHU&distance=5000&orderBy=Datetime:desc"),header:{"Content-Type":"application/json"},data:{key:d._apiKey,lat:d.BASE_CONFIG.location.lat,lon:d.BASE_CONFIG.location.lon,an:d.BASE_CONFIG.location.curid.substr(0,4)},dataType:"json",success:function(e){if(console.log("res",e),e&&e.data&&e.data.DS&&e.data.DS.length>0)for(var a=0;a<e.data.DS.length;a++)if("999999"!=e.data.DS[a]["PRS"]||999999!=e.data.DS[a]["PRS"]){t(e.data);break}}})},getNearForcest:function(t){var e=this;return(0,s.default)(regeneratorRuntime.mark((function a(){var i,n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e,n=0;case 2:if(!(n<5)){a.next=14;break}return i.nearForcestData=null,r=o.default.getAppointHourStr(new Date,-10+n,"yyyyMMddhh0000"),a.next=7,e.myRequest({url:"".concat(d.API.wx_api,"/queryUdi/getEleByTime?dataCode=SEVP_NX_WEFC_RFFC&interfaceId=getEleByTime&times=").concat(r,"&elements=Validtime,TEM,WIN_U,WIN_V&eleValueRanges=Station_Id_C:E").concat((.1*Math.round(Number(d.BASE_CONFIG.location.lon)/.1)).toFixed(3),"_N").concat((.1*Math.round(Number(d.BASE_CONFIG.location.lat)/.1)).toFixed(3))});case 7:if(s=a.sent,!(s.data.DS.length>0)){a.next=11;break}return t(s.data.DS),a.abrupt("break",14);case 11:n++,a.next=2;break;case 14:case"end":return a.stop()}}),a)})))()},formatNearForcestData:function(t,e){var a=(new Date).getHours(),i=null;return i=a+t===24?o.default.getAppointHourStr(new Date,t,"MM月dd日"):o.default.getAppointHourStr(new Date,t,"hh:00"),{time:i}},getTimeRangeStrByCurrentTime:function(){var t=(new Date).getHours(),e="";return t>=18?e=2:t>13?e=1:t>7?e=0:t>=0&&(e=3),e},getSevenForecast:function(t){var e,a=this.BJDate.getHours();e=a<8?o.default.getAppointDateStr(this.BJDate,-1,"yyyyMMdd120000"):a>=8&&a<20?o.default.getAppointDateStr(this.BJDate,0,"yyyyMMdd000000"):o.default.getAppointDateStr(this.BJDate,0,"yyyyMMdd120000"),uni.request({url:"".concat(d.API.wx_api,"/queryUdi/getEleByTimeAndAreaCode?dataCode=SEVP_NX_WEFC_RFFC&interfaceId=getEleByTimeAndAreaCode&times=").concat(e,"&elements=Station_Id_C,Datetime,Validtime,TEM_Max_24h,TEM_Min_24h,WEP_Past_12h,WIN_PD_12h,WIN_S_Max_12h&areacode=")+d.BASE_CONFIG.location.curid.substr(0,6)+"&eleValueRanges=Validtime:12,24,36,48,60,72,,84,96,108,120;Prod_Code:SNWFD",header:{"Content-Type":"application/json"},dataType:"json",success:function(e){0==e.data.returnCode&&t(e.data.DS)}})},formatSevenDayData:function(t){var e,a,i=Math.ceil(d.systemInfo.windowWidth/5),n=[];for(var r in t){var s=t[r];if(null==a)a=s["Station_Id_C"];else if(a!=s["Station_Id_C"])continue;if(s["Validtime"]%24!=0)parseInt(s["WIN_PD_12h"]),parseInt(s["WIN_S_Max_12h"]),e=(o.default.isDaylight()?(0,l.queryWeather2)(s["WEP_Past_12h"],"n"):(0,l.queryWeather2)(s["WEP_Past_12h"],"d")).name;else{var c=o.default.toTimeZone(s["Datetime"],parseInt(s["Validtime"]),"MM月dd日"),u=parseInt(s["TEM_Min_24h"]),f=parseInt(s["TEM_Max_24h"]),y=parseInt(s["TEM_Max_24h"]),_=parseInt(s["WIN_S_Max_12h"]),h=[e,(o.default.isDaylight()?(0,l.queryWeather2)(s["WEP_Past_12h"],"n"):(0,l.queryWeather2)(s["WEP_Past_12h"],"d")).name];n.push({date:c,tempMax:f,tempMin:u,win:y,speed:_,wea:h,width:i+"px",src:["/static/images/weather/".concat((0,l.queryWeather)(h[0],"d").image,".png"),"/static/images/weather/".concat((0,l.queryWeather)(h[1],"n").image,".png")]})}}return{daysWidth:7*i+"px",day7:n}},init7DayEchart:function(t,e,a){var i=this;console.info(t,e,a);for(var n=[],s=[],o=9999,l=-9999,d=0;d<t.length;d++)o=Math.min(t[d].tempMin,o),l=Math.max(t[d].tempMax,l),n.push(t[d].tempMin),s.push(t[d].tempMax);this.$refs["ec-canvas"].init((function(t){var d=c.init(t,null,{width:e,height:a}),u=(0,r.default)({calcubale:!1,animation:!0,xAxis:[{type:"category",boundaryGap:!1,splitLine:!1,axisLabel:!1,splitArea:!1,axisLine:!1,axisTick:!1}],yAxis:[{splitLine:!1,scale:!1,allowDecimals:!1,splitNumber:"4",min:1*o,max:1*l,type:"value",show:!1,boundaryGap:!1,splitArea:!1,axisLine:!1,axisTick:!1}],grid:{x:40,x2:190,y:40,y2:40,borderWidth:0},series:[{type:"line",smooth:!0,symbol:"circle",symbolSize:5,itemStyle:{color:"#F59F1E"},lineStyle:{color:"#F59F1E",width:1},label:{color:"#fff",show:!0,fontSize:14,position:"top",formatter:"{c}°"},data:s},{type:"line",smooth:!0,symbol:"circle",symbolSize:5,itemStyle:{color:"#43B3FF"},lineStyle:{color:"#43B3FF",width:1},label:{color:"#fff",fontSize:14,show:!0,position:"bottom",formatter:"{c}°"},data:n}]},"animation",!1);return d.setOption(u),i.tempEchart=d,d}))},getAirqualityForecast:function(t){var e=this,a=o.default.toTimeWorld(this.BJDate),i=a.Format("yyyyMMddhhmmss"),n=o.default.getAppointHourStr(a,-12,"yyyyMMddhhmmss");uni.request({url:"".concat(d.API.wx_api,"/queryUdi/getEleByTimeRangeAndRadius?interfaceId=getEleByTimeRangeAndRadius&dataCode=CAWN_MEE_AIR_EMO&timeRange=%5B").concat(n,",").concat(i,"%5D&elements=V_QUAL,V_PPOLLU,V15823,V15810,PM2p5_Densty,PM10_Densty_Fore&distance=15000&orderBy=Datetime:desc"),header:{"Content-Type":"application/json"},data:{key:d._apiKey,lat:d.BASE_CONFIG.location.lat,lon:d.BASE_CONFIG.location.lon,an:d.BASE_CONFIG.location.curid.substr(0,4)},dataType:"json",success:function(a){if(e.airqualityData=null,a&&a.data&&a.data.DS&&a.data.DS.length>0)for(var i=0;i<a.data.DS.length;i++)if("999900"!=a.data.DS[i]["V_QUAL"]){t(a.data.DS[i]);break}}})},formatAirqualityData:function(t){var e="\n\t\t        width: ".concat((d.systemInfo.windowWidth-20)/4,"px;\n\t\t        height: ").concat((d.systemInfo.windowWidth-20)/4,"px \n\t\t    "),a={"AQI等级":"AQIDJ","AQI指数":"AQIZS","首要污染物":"SYWYW"},i=[];for(var n in t)"预报时效"!=n&&i.push({name:n,value:t[n],style:e,src:"/static/images/airquality/".concat(a[n]||n,".png")});return i},goToSearch:function(){uni.navigateTo({url:"./search",fail:function(t){console.log(t)}})},toogleAirqualityState:function(t){},myRequest:function(t){return new Promise((function(e,a){uni.request({url:t.url,data:t.params||{},method:t.method||"GET",success:function(t){e(t)},fail:function(t){uni.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),a(null)}})}))}}};e.default=u},d4cb:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADuSURBVHgBtZZdDYNAEIQXFCCBOqgE6gAJSKiEOmgd0CogVQAOKgEcUAfTuYSHAuH+70s2JBy3c+ywG0QIgHGJO6OUFDDxjDUfRhNVkMluOKZTghIKk5xhRr1ty6jEF27uYc8IH/+44Qo/7P3jQwXCMfsHt5LpWPmXbURqXjqJy5RvbgyMr0RmJZJlmRJ4SRwGxoU5T7sVVUf4o7xQjV0Yj4D9mDHRw7VJoR8z7qc+ELEZM42EAnPPlLa5cs3aW7P25FczSSjQj5lKYnFQslFiwoR1EsM3Iqpks6/hLkKPP4FWUoD1mKkkFVh+mcSTH6dUEvfCyVz0AAAAAElFTkSuQmCC"}}]);