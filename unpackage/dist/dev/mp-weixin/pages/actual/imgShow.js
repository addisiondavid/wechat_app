(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/actual/imgShow"],{83:function(e,t,n){"use strict";(function(e){n(5);a(n(3));var t=a(n(84));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},84:function(e,t,n){"use strict";n.r(t);var a=n(85),i=n(87);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(89);var s,c=n(15),r=Object(c["default"])(i["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],s);r.options.__file="pages/actual/imgShow.vue",t["default"]=r.exports},85:function(e,t,n){"use strict";n.r(t);var a=n(86);n.d(t,"render",(function(){return a["render"]})),n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(t,"components",(function(){return a["components"]}))},86:function(e,t,n){"use strict";var a;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return a}));try{a={ppSlider:function(){return n.e("uni_modules/pp-slider/components/pp-slider/pp-slider").then(n.bind(null,343))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement;e._self._c},o=!1,s=[];i._withStripped=!0},87:function(e,t,n){"use strict";n.r(t);var a=n(88),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},88:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(25)),i=o(n(64));function o(e){return e&&e.__esModule?e:{default:e}}var s=getApp().globalData,c={data:function(){return{currenEle:"",shici_conf_data:[],currentMenu:"",dataCode:"",listData:[],imgLastIndex:0,imgIndex:0,curr_img_time:"",timer:null,startData:{clientX:0,clientY:0},isAutoPlay:!1,imgBaseUrl:s.API.wx_api,setData:{distance:0,scale:1,scaleWidth:414,scaleHeight:240,baseWidth:414,baseHeight:240},radarEle:""}},onLoad:function(t){if(console.log("actual page",t),this.radarEle=t.eleName,!t.ele)return!1;this.currenEle=t.ele;var n=i.default[t.ele],a=n.name,o=n.dataCode,s=n.conf;this.shici_conf_data=s,this.currentMenu=s[0],this.dataCode=o,e.setNavigationBarTitle({title:"".concat(a)})},onShow:function(){var t=this;this.getListData(),e.onWindowResize((function(e){"landscape"===e.deviceOrientation?"雷达"===t.radarEle&&(t.setData.baseWidth=820,t.setData.baseHeight=480,t.setData.scaleWidth="100%",t.setData.scaleHeight="calc(100% - 45px)"):(t.setData.baseWidth=414,t.setData.baseHeight=240,t.setData.scaleWidth="414",t.setData.scaleHeight="240")}))},methods:{changeOrientation:function(){plus},menuToggle:function(e){this.currentMenu=e,this.getListData()},getListData:function(){var t=this,n=null,i=new Date,o=a.default.toTimeWorld(i);n=a.default.getAppointHourStr(o,-2,"yyyyMMddhhmmss"),console.log("elase");var c=a.default.getAppointHourStr(o,8,"yyyyMMddhhmmss");this.currentMenu.timeRange&&(n=(this.currenEle,a.default.getAppointHourStr(o,this.currentMenu.timeRange,"yyyyMMddhhmmss")),console.log("this.currentMenu.timeRange....",this.currentMenu.timeRange)),e.showToast({title:"加载中",icon:"loading",duration:1e4});var r="";r=this.currentMenu.areaCode?"getFileByTimeRangeAndAreaCode?interfaceId=getFileByTimeRangeAndAreaCode&areaCode=".concat(this.currentMenu.areaCode):"getFileByTimeRangeAndEleCode?interfaceId=getFileByTimeRangeAndEleCode&eleCode=".concat(this.currentMenu.eleCode),console.log("startDate....",n),console.log("endDate....",c),e.request({url:"".concat(s.API.wx_api,"/downUdi/").concat(r,"&dataCode=").concat(this.dataCode,"&timeRange=%5B").concat(n,",").concat(c,"%5D&elements=Valid,File_URL,Datetime&orderBy=Datetime"),header:{"Content-Type":"application/json"},data:{key:s._apiKey},dataType:"json",success:function(n){n.data.DS.length>0?(console.log("res...........",n),t.listData=n.data.DS,t.imgLastIndex=t.listData.length-1,t.changePic(t.imgLastIndex),e.hideToast()):e.showToast({title:"暂无数据！",icon:"error",duration:2e3})},fail:function(t){e.showToast({title:"加载失败！",icon:"error",duration:2e3})}})},changePic:function(e){this.imgIndex=e,this.radarEle,this.curr_img_time=a.default.toTimeZone(this.listData[e].Datetime,-8,"yyyy-MM-dd hh:mm")},touchstart:function(e){if(console.log("开始位置",e.changedTouches[0].clientX),this.startData.clientX=e.changedTouches[0].clientX,this.startData.clientY=e.changedTouches[0].clientY,1!=e.touches.length){console.log("双手指触发开始"),console.log("e:...............",e);var t=e.touches[1].clientX-e.touches[0].clientX,n=e.touches[1].clientY-e.touches[0].clientY,a=Math.sqrt(t*t+n*n);this.setData.distance=a}else console.log("单滑了")},touchend:function(e){console.log("结束位置",e.changedTouches[0].clientX);var t=e.changedTouches[0].clientX-this.startData.clientX,n=e.changedTouches[0].clientY-this.startData.clientY;n>50||n<-50?console.log("上下滑"):(t>100?0!=this.imgIndex&&this.imgIndex--:t<-100&&this.imgIndex!=this.listData.length-1&&this.imgIndex++,this.changePic(this.imgIndex))},autoPlay:function(){var e=this;this.isAutoPlay=!this.isAutoPlay,clearInterval(this.timer),this.isAutoPlay&&(this.timer=setInterval((function(){e.imgIndex++,e.imgIndex==e.listData.length&&(e.imgIndex=0),e.changePic(e.imgIndex)}),1e3))},sliderChange:function(e){this.changePic(e)},signatureTouchStart:function(e){console.log("phone touch")},touchMoveHandle:function(e){if(1!=e.touches.length){console.log("双手指运动开始");var t=e.touches[1].clientX-e.touches[0].clientX,n=e.touches[1].clientY-e.touches[0].clientY,a=Math.sqrt(t*t+n*n),i=a-this.setData.distance,o=this.setData.scale+.005*i;o>=2&&(o=2),o<=.6&&(o=.6);var s=o*this.setData.baseWidth,c=o*this.setData.baseHeight;console.log("scaleWidth.......",s),console.log("scaleHeight......",c),this.setData.scaleWidth=s,this.setData.scaleHeight=c}else console.log("单滑了")}}};t.default=c}).call(this,n(1)["default"])},89:function(e,t,n){"use strict";n.r(t);var a=n(90),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},90:function(e,t,n){}},[[83,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/actual/imgShow.js.map