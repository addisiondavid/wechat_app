(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/actual/rank"],{58:function(t,e,a){"use strict";(function(t){a(5);n(a(3));var e=n(a(59));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a(1)["createPage"])},59:function(t,e,a){"use strict";a.r(e);var n=a(60),i=a(62);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a(65);var o,s=a(15),c=Object(s["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);c.options.__file="pages/actual/rank.vue",e["default"]=c.exports},60:function(t,e,a){"use strict";a.r(e);var n=a(61);a.d(e,"render",(function(){return n["render"]})),a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(e,"components",(function(){return n["components"]}))},61:function(t,e,a){"use strict";var n;a.r(e),a.d(e,"render",(function(){return i})),a.d(e,"staticRenderFns",(function(){return o})),a.d(e,"recyclableRender",(function(){return r})),a.d(e,"components",(function(){return n}));try{n={uniDatetimePicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(a.bind(null,321))},uniLoadMore:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(a.bind(null,332))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},r=!1,o=[];i._withStripped=!0},62:function(t,e,a){"use strict";a.r(e);var n=a(63),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},63:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a(25)),i=r(a(64));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return l(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return d(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var h=getApp().globalData,m={data:function(){return{currenEle:"",shici_conf_data:null,currentDataCode:"",unit:"",currentMenu:"",isCanSearch:!0,rankType:"desc",listData:[],dataTime:"".concat(n.default.getAppointDateStr(new Date,-1,"MM月dd日hh时"),"-").concat((new Date).Format("dd日hh时")),loadMoreStatus:"noMore",isInfiniting:!0,dataIndex:0,renderListData:[],moreList:["选项一","选项二","选项三"],value:[1],multiIndex:[0,0,0],multiIds:[],multiArray:[["全区"],["银川市","石嘴山市","吴忠市","固原市","中卫市"],["兴庆区","金凤区","西夏区","永宁县","贺兰县","灵武市"]],newArr:[],tempRegionArr:[],tempRegionArr2:[],tempListData:[],allRegionData:[],region2:"",region3:"",tryme:"区域",area_code:{"兴庆区":"640104","金凤区":"640106","西夏区":"640105","永宁县":"640121","贺兰县":"640122","灵武市":"640181","惠农区":"640205","大武口区":"640202","平罗县":"640221","利通区":"640302","红寺堡区":"640303","盐池县":"640323","同心县":"640324","青铜峡市":"640381","西吉县":"640422","隆德县":"640423","彭阳县":"640425","泾源县":"640424","原州区":"640402","沙坡头区":"640502","中宁县":"640521","海原县":"640522","银川市":"640100","石嘴山市":"640200","吴忠市":"640300","固原市":"640400","中卫市":"640500"},regionFilData:[],startDate:null,endDate:null,timeSelected:!1,array:["全区","市","区"],index:0,selectedRegion:"",hasRegionData:"",province:"",city1:"",city:"",cityy:"",jy:!0,reset:!1,shengArr:[],shiArr:[],provinceData:[{label:"银川市",value:"11"},{label:"石嘴山市",value:"12"},{label:"吴忠市",value:"13"},{label:"固原市",value:"14"},{label:"中卫市",value:"15"}],cityData:[[{label:"兴庆区",value:"1101"},{label:"金凤区",value:"1102"},{label:"西夏区",value:"1103"},{label:"永宁县",value:"1104"},{label:"贺兰县",value:"1105"},{label:"灵武市",value:"1106"}],[{label:"惠农区",value:"1201"},{label:"大武口区",value:"1202"},{label:"平罗县",value:"1203"}],[{label:"利通区",value:"1301"},{label:"红寺堡区",value:"1302"},{label:"盐池县",value:"1303"},{label:"同心县",value:"1304"},{label:"青铜峡市",value:"1305"}],[{label:"西吉县",value:"1401"},{label:"隆德县",value:"1402"},{label:"彭阳县",value:"1403"},{label:"泾源县",value:"1404"},{label:"原州区",value:"1405"}],[{label:"沙坡头区",value:"1501"},{label:"中宁县",value:"1502"},{label:"海原县",value:"1503"}]]}},onLoad:function(e){if(console.log("actual page",e),!e.ele)return!1;this.currenEle=e.ele;var a=i.default[this.currenEle],n=a.name,r=a.conf,o=a.unit,s=a.dataCode;this.shici_conf_data=r,this.currentDataCode=s,this.unit=o,this.currentMenu=r[0],this.isCanSearch=!(!this.currentMenu||void 0!=this.currentMenu.isCanSearch),t.setNavigationBarTitle({title:"宁夏".concat(n,"排行")})},onShow:function(){this.getListData()},onReachBottom:function(){this.loadMoreList()},methods:{resetHandler:function(t){this.reset=!0,this.province="",this.cityy="",this.listData=this.tempListData,this.renderListData=this.tempListData},sheng:function(e){var a=this;this.reset=!1,this.allRegionData=[],this.shengArr=[],this.shiArr=[],this.cityy="选择地区";var n=e.detail.value;this.province=this.provinceData[n].label;var i=this.area_code[this.province];this.city1=this.cityData[n],"AIR"==this.currenEle?this.jy=!0:this.jy=!1,t.request({url:"https://jcfw.qx121.com.cn/statUdi/statDataByTimeRangAndAreaCode?interfaceId=statDataByTimeRangAndAreaCode&dataCode=SURF_NX_MUL_HOR&timeRange=%5B".concat(this.startDate,",").concat(this.endDate,"%5D&elements=Station_Name,Station_Id_C&statEles=PRE_1h_SUM&key=MTM2OTMzNTM3MjM%3D&areacode=").concat(i),data:{},method:"GET",success:function(t){a.allRegionData=t.data.DS,console.log("res.data.DS",t.data.DS),"AIR"==a.currenEle?a.tempListData.forEach((function(t){t.V_CITY_CODE.includes(i)&&a.shengArr.push(t)})):t.data.DS.forEach((function(t){a.tempListData.forEach((function(e){t.Station_Id_C==e.Station_Id_C&&a.shengArr.push(e)}))})),a.listData=a.shengArr,a.renderListData=a.shengArr},fail:function(e){t.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),reject(null)}})},shi:function(e){var a=this;this.reset=!1,this.allRegionData=[],this.shiArr=[];var n=e.detail.value;this.cityy=this.city1[n].label,console.log("this.cityy",this.cityy);var i=this.area_code[this.cityy];this.jy=!1,console.log("areaCode",i),t.request({url:"https://jcfw.qx121.com.cn/statUdi/statDataByTimeRangAndAreaCode?interfaceId=statDataByTimeRangAndAreaCode&dataCode=SURF_NX_MUL_HOR&timeRange=%5B".concat(this.startDate,",").concat(this.endDate,"%5D&elements=Station_Name,Station_Id_C&statEles=PRE_1h_SUM&key=MTM2OTMzNTM3MjM%3D&areacode=").concat(i),data:{},method:"GET",success:function(t){a.allRegionData=t.data.DS,a.tempListData.forEach((function(t){i==t.Admin_Code_CHN&&a.shiArr.push(t)})),a.listData=a.shiArr,a.renderListData=a.shiArr},fail:function(e){t.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),reject(null)}})},pickChange:function(e){var a=this;this.selectedRegion=this.array[e.detail.value];var n="";this.setData({index:e.detail.value}),"市"==this.array[e.detail.value]?n=this.area_code[this.region2]:"区"==this.array[e.detail.value]&&(n=this.area_code[this.region3]),this.tempRegionArr=[];var i={renderListData:this.renderListData};t.request({url:"https://jcfw.qx121.com.cn/statUdi/statDataByTimeRangAndAreaCode?interfaceId=statDataByTimeRangAndAreaCode&dataCode=SURF_NX_MUL_HOR&timeRange=%5B".concat(this.startDate,",").concat(this.endDate,"%5D&elements=Station_Name,Station_Id_C&statEles=PRE_1h_SUM&key=MTM2OTMzNTM3MjM%3D&areacode=").concat(n),data:{},method:"GET",success:function(t){console.log("this.templistData",a.templistData),t.data.DS.forEach((function(t){a.templistData.forEach((function(e){t.Station_Id_C==e.Station_Id_C&&(console.log("ele",e),a.tempRegionArr.push(e))}))})),i.renderListData=a.tempRegionArr,a.listData=a.tempRegionArr,a.regionFilData=a.tempRegionArr,a.setData(i)},fail:function(e){t.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),reject(null)}})},testing:function(t){console.log("修改的列为",t.detail.column,"，值为",t.detail.value);var e={multiArray:this.multiArray,multiIndex:this.multiIndex},a={tryme:this.tryme};switch(e.multiIndex[t.detail.column]=t.detail.value,console.log("data.multiIndex",e.multiIndex),t.detail.column){case 1:switch(e.multiIndex[0]){case 0:switch(e.multiIndex[1]){case 0:e.multiArray[2]=["兴庆区","金凤区","西夏区","永宁县","贺兰县","灵武市"];break;case 1:e.multiArray[2]=["惠农区","大武口区","平罗县"];break;case 2:e.multiArray[2]=["利通区","红寺堡区","盐池县","同心县","青铜峡市"];break;case 3:e.multiArray[2]=["西吉县","隆德县","彭阳县","泾源县","原州区"];break;case 4:e.multiArray[2]=["沙坡头区","中宁县","海原县"];break}break}e.multiIndex[2]=0;break}console.log(e.multiIndex),"区域 "===this.tryme?this.tryme="区域":this.tryme="区域 ",a.tryme=this.tryme,this.setData(e),this.setData(a),this.multiArray=e.multiArray,this.multiIndex=e.multiIndex},setData:function(t){var e,a,n=this,i=[];Object.keys(t).forEach((function(r){i=r.split("."),e=t[r],a=n.$data,i.forEach((function(t,r){r+1==i.length?n.$set(a,t,e):a[t]||n.$set(a,t,{}),a=a[t]}))}))},bindMultiPickerChange:function(t){console.log(this.data.multiIds)},test1:function(e){var a=this;this.multiArray[1][e.detail.value[1]];t.request({url:"https://jcfw.qx121.com.cn/statUdi/statDataByTimeRangAndAreaCode?interfaceId=statDataByTimeRangAndAreaCode&dataCode=SURF_NX_MUL_HOR&timeRange=%5B".concat(this.startDate,",").concat(this.endDate,"%5D&elements=Station_Name,Station_Id_C&statEles=PRE_1h_SUM&key=MTM2OTMzNTM3MjM%3D&areacode=").concat(this.area_code[this.multiArray[2][e.detail.value[2]]]),data:{},method:"GET",success:function(t){console.log("res",t),t.data.DS.forEach((function(t){a.listData.forEach((function(e){t.Station_Id_C==e.Station_Id_C&&a.tempRegionArr.push(e)}))})),console.log("this.tempRegionArr",a.tempRegionArr)},fail:function(e){t.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),reject(null)}})},multiColChange:function(e){var a=this;this.tempRegionArr=[],this.region2=this.multiArray[1][e.detail.value[1]],this.region3=this.multiArray[2][e.detail.value[2]],0==this.timeSelected&&(this.listData=this.templistData);var n={renderListData:this.renderListData};t.request({url:"https://jcfw.qx121.com.cn/statUdi/statDataByTimeRangAndAreaCode?interfaceId=statDataByTimeRangAndAreaCode&dataCode=SURF_NX_MUL_HOR&timeRange=%5B".concat(this.startDate,",").concat(this.endDate,"%5D&elements=Station_Name,Station_Id_C&statEles=PRE_1h_SUM&key=MTM2OTMzNTM3MjM%3D&areacode=").concat(this.area_code[this.multiArray[2][e.detail.value[2]]]),data:{},method:"GET",success:function(t){a.hasRegionData=t.data.DS,a.regionFilData=t.data.DS,console.log("this.listData",a.listData),t.data.DS.forEach((function(t){a.listData.forEach((function(e){t.Station_Id_C==e.Station_Id_C&&a.tempRegionArr.push(e)}))})),n.renderListData=a.tempRegionArr,a.templistData=a.listData,a.listData=a.tempRegionArr,a.setData(n),a.timeSelected=!1},fail:function(e){t.showToast({title:"网络错误，稍后重试！",icon:"error",duration:3e3}),reject(null)}})},menuToggle:function(t){this.currentMenu=t,this.rankType="asc"===this.currentMenu.rankType?"asc":"desc",this.isCanSearch=!(!this.currentMenu||void 0!=this.currentMenu.isCanSearch),this.getListData()},rankTypeChange:function(){this.rankType="asc"===this.currentMenu.rankType?"asc":"desc",this.listData=this.listData.reverse(),this.dataIndex=0,this.renderListData=[],this.reloadList()},goToVIew:function(e){console.log(this.renderListData),t.navigateTo({url:"./stationDetail?Station_Id_C=".concat(e.Station_Id_C,"&Station_Name=").concat(e.Station_Name,"&ele=").concat(this.currenEle,"&subEle=").concat(this.currentMenu.eleCode),fail:function(t){console.log(t)}})},dateChange:function(t){var e=new Date(t);this.getListData(e)},getListData:function(e){var a=this,i=this.currentMenu.timeInterval,r=new Date;e&&(r=e);var o=n.default.toTimeWorld(r),s=o.Format("yyyyMMddhhmmss"),c=n.default.getAppointHourStr(o,-i,"yyyyMMddhhmmss");"Day"==this.currentMenu.date_type?("BJ"==this.currentMenu.date_area?(s=n.default.getAppointDateStr(r,this.currentMenu.deviation,"yyyyMMdd120000"),c=n.default.getAppointDateStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMdd000000")):(s=n.default.getAppointDateStr(o,this.currentMenu.deviation,"yyyyMMdd120000"),c=n.default.getAppointDateStr(o,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMdd000000")),this.dataTime="".concat(n.default.getAppointDateStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"MM月dd日00时"))):"Hor"==this.currentMenu.date_type?("BJ"==this.currentMenu.date_area?(s=n.default.getAppointHourStr(r,this.currentMenu.deviation,"yyyyMMddhh0000"),c=n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMddhh0000"),console.log("wind.....111111111111111111111111111")):(console.log("wind.....122222222"),s=n.default.getAppointHourStr(o,this.currentMenu.deviation,"yyyyMMddhh0000"),c=n.default.getAppointHourStr(o,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMddhh0000")),this.dataTime="".concat(n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"MM月dd日hh时"),"-").concat(n.default.getAppointHourStr(r,this.currentMenu.deviation,"MM月dd日hh时"))):("BJ"==this.currentMenu.date_area?(c=n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMddhh0000"),s=n.default.getAppointHourStr(r,this.currentMenu.deviation,"yyyyMMddhh0000")):(c=n.default.getAppointHourStr(o,this.currentMenu.deviation-this.currentMenu.timeInterval,"yyyyMMddhh0000"),s=n.default.getAppointHourStr(o,this.currentMenu.deviation,"yyyyMMddhh0000")),this.dataTime="".concat(n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval,"MM月dd日hh时"),"-").concat(n.default.getAppointHourStr(r,this.currentMenu.deviation,"MM月dd日hh时")));var u=h.API.wx_api;t.showToast({title:"加载中",icon:"loading",duration:1500}),"PRE"==this.currenEle?"PRE_Time_0808"!=this.currentMenu.eleCode?u+="/statUdi/statDataByTimeRang?interfaceId=statDataByTimeRang&dataCode=".concat(this.currentMenu.sta_dataCode,"&timeRange=%5B").concat(c,",").concat(s,"%5D&elements=Station_Name,Admin_Code_CHN,Station_Id_C&statEles=").concat(this.currentMenu.statCode,"_SUM"):u+="/statUdi/statDataByTimeRang?interfaceId=statDataByTimeRang&dataCode=SURF_NX_MUL_CURRYEAR_DAY&timeRange=%5B".concat(c,",").concat(s,"%5D&elements=Station_Name,Admin_Code_CHN,Station_Id_C&statEles=PRE_Time_0808_SUM,PRE_Time_0808_MMUT_SUM"):"AIR"==this.currenEle?u+="/queryUdi/getEleByTimeRange?interfaceId=getEleByTimeRange&dataCode=".concat(this.currentMenu.sta_dataCode,"&timeRange=%5B").concat(c,",").concat(s,")&elements=Lon,Lat,Station_Id_C,V_CITY,V_CITY_CODE,Station_SiteName,").concat(this.currentMenu.eleCode,"&orderBy=").concat(this.currentMenu.eleCode,":").concat(this.rankType):("TEM_ChANGE_24h"==this.currentMenu.eleCode&&(this.dataTime="".concat(n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval-24,"MM月dd日hh时"),"-").concat(n.default.getAppointHourStr(r,this.currentMenu.deviation-1,"MM月dd日hh时"))),"TEM_Min"!=this.currentMenu.eleCode&&"TEM_Max"!=this.currentMenu.eleCode||(this.dataTime="".concat(n.default.getAppointHourStr(r,this.currentMenu.deviation-this.currentMenu.timeInterval-24,"MM月dd日"))),console.log("this.currentMenu.eleCode....",this.currentMenu.eleCode),u+="/queryUdi/getEleByTimeRange?interfaceId=getEleByTimeRange&dataCode=".concat(this.currentMenu.sta_dataCode,"&timeRange=%5B").concat(c,",").concat(s,")&elements=Station_Name,").concat(this.currentMenu.eleCode,",Admin_Code_CHN,Station_Id_C&orderBy=").concat(this.currentMenu.eleCode,":").concat(this.rankType)),this.listData=[],this.renderListData=[],this.tempRegionArr2=[],this.startDate=c,this.endDate=s,t.request({url:u,header:{"Content-Type":"application/json"},data:{key:h._apiKey},dataType:"json",success:function(e){if(e.data.DS.length>0){"PRE"==a.currenEle?(a.listData=e.data.DS.filter((function(t){return t[a.currentMenu.statCode+"_SUM"]>0&&t[a.currentMenu.statCode+"_SUM"]<2e3})),a.listData.sort((function(t,e){return t[a.currentMenu.statCode+"_SUM"]<e[a.currentMenu.statCode+"_SUM"]?1:-1}))):a.listData=e.data.DS.filter((function(t){return 999999!=t[a.currentMenu.eleCode]})),a.timeSelected=!0,console.log("this.listData ",a.listData),a.tempListData=a.listData;var n=[];n=[],a.reset?a.listData=a.tempListData:(a.shiArr.length>0||a.shengArr.length>0)&&(a.listData.forEach((function(t){a.allRegionData.forEach((function(e){t.Station_Id_C===e.Station_Id_C&&n.push(t)}))})),a.listData=n),a.dataIndex=0,a.reloadList()}else t.showToast({title:"暂无数据！",icon:"error",duration:3e3})},fail:function(e){t.showToast({title:"网络错误！",icon:"error",duration:3e3})}})},loadMoreList:function(){var t=Math.floor(this.listData.length/200)-1;this.dataIndex>t?this.loadMoreStatus="noMore":(this.loadMoreStatus="loading",this.dataIndex++,this.reloadList())},reloadList:function(){var t;(t=this.renderListData).push.apply(t,o(this.listData.slice(200*this.dataIndex,200*this.dataIndex+200)))}}};e.default=m}).call(this,a(1)["default"])},65:function(t,e,a){"use strict";a.r(e);var n=a(66),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},66:function(t,e,a){}},[[58,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/actual/rank.js.map