(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/actual/rankAdd"],{67:function(t,e,n){"use strict";(function(t){n(5);a(n(3));var e=a(n(68));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},68:function(t,e,n){"use strict";n.r(e);var a=n(69),r=n(71);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n(73);var i,u=n(15),c=Object(u["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],i);c.options.__file="pages/actual/rankAdd.vue",e["default"]=c.exports},69:function(t,e,n){"use strict";n.r(e);var a=n(70);n.d(e,"render",(function(){return a["render"]})),n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(e,"components",(function(){return a["components"]}))},70:function(t,e,n){"use strict";var a;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return i})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return a}));try{a={uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,321))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,332))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var t=this,e=t.$createElement;t._self._c},o=!1,i=[];r._withStripped=!0},71:function(t,e,n){"use strict";n.r(e);var a=n(72),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},72:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(25)),r=o(n(64));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return d(t)||s(t)||c(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var f=getApp().globalData,h={data:function(){return{currenEle:"",shici_conf_data:null,currentDataCode:"",unit:"",currentMenu:"",rankType:"desc",listData:[],dataTime:"".concat(a.default.getAppointDateStr(new Date,-1,"MM月dd日hh时"),"-").concat((new Date).Format("dd日hh时")),loadMoreStatus:"noMore",isInfiniting:!0,dataIndex:0,renderListData:[]}},onLoad:function(e){if(console.log("actual page",e),!e.ele)return!1;this.currenEle=e.ele;var n=r.default[this.currenEle],a=n.name,o=n.conf,i=n.unit,u=n.dataCode;this.shici_conf_data=o,this.currentDataCode=u,this.unit=i,this.currentMenu=o[0],t.setNavigationBarTitle({title:"宁夏".concat(a,"累加排行")})},onShow:function(){this.getListData(new Date(a.default.getAppointHourStr(new Date,-1,"yyyy/MM/dd hh:mm")),new Date)},onReachBottom:function(){this.loadMoreList()},methods:{rankTypeChange:function(){this.rankType="desc"===this.rankType?"asc":"desc",this.listData=this.listData.reverse(),this.dataIndex=0,this.renderListData=[],this.reloadList()},dateChange:function(t){console.log("date:",t),this.getListData(new Date(t[0].replace("-","/")),new Date(t[1].replace("-","/")))},getListData:function(e,n){var r=this;e.setMinutes(0);var o=a.default.toTimeWorld(e).Format("yyyyMMddhhmmss"),i=a.default.toTimeWorld(n).Format("yyyyMMddhhmmss");a.default.toTimeWorld(new Date);this.dataTime="".concat(e.Format("MM月dd日hh时"),"-").concat(n.Format("dd日hh时")),t.showToast({title:"加载中",icon:"loading",duration:1500}),this.listData=[],this.renderListData=[],t.request({url:"".concat(f.API.wx_api,"/statUdi/statDataByTimeRang?interfaceId=statDataByTimeRang&dataCode=").concat(this.currentDataCode,"&timeRange=%5B").concat(o,",").concat(i,")&elements=Station_Name,Station_Id_C&statEles=").concat(this.currentMenu.statCode,"_SUM"),header:{"Content-Type":"application/json"},data:{key:f._apiKey},dataType:"json",success:function(e){console.log("call-here-----------------:",e),e.data.DS.length>0?(console.log("left:,this",e),"PRE"==r.currenEle?(r.listData=e.data.DS.filter((function(t){return t[r.currentMenu.statCode+"_SUM"]>0&&t[r.currentMenu.statCode+"_SUM"]<2e3})),r.listData.sort((function(t,e){return t[r.currentMenu.statCode+"_SUM"]<e[r.currentMenu.statCode+"_SUM"]?1:-1}))):r.listData=e.data.DS.filter((function(t){return 999999!=t[r.currentMenu.eleCode]})),r.dataIndex=0,r.reloadList()):t.showToast({title:"暂无数据！",icon:"error",duration:3e3})},fail:function(e){t.showToast({title:"网络错误！",icon:"error",duration:3e3})}})},loadMoreList:function(){var t=Math.floor(this.listData.length/200)-1;this.dataIndex>t?this.loadMoreStatus="noMore":(this.loadMoreStatus="loading",this.dataIndex++,this.reloadList())},reloadList:function(){var t;(t=this.renderListData).push.apply(t,i(this.listData.slice(200*this.dataIndex,200*this.dataIndex+200)))}}};e.default=h}).call(this,n(1)["default"])},73:function(t,e,n){"use strict";n.r(e);var a=n(74),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},74:function(t,e,n){}},[[67,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/actual/rankAdd.js.map