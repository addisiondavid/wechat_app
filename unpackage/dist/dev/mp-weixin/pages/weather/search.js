(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/weather/search"],{42:function(t,e,n){"use strict";(function(t){n(5);o(n(3));var e=o(n(43));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},43:function(t,e,n){"use strict";n.r(e);var o=n(44),c=n(46);for(var r in c)"default"!==r&&function(t){n.d(e,t,(function(){return c[t]}))}(r);n(48);var a,i=n(15),s=Object(i["default"])(c["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);s.options.__file="pages/weather/search.vue",e["default"]=s.exports},44:function(t,e,n){"use strict";n.r(e);var o=n(45);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},45:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return c})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));var c=function(){var t=this,e=t.$createElement;t._self._c},r=!1,a=[];c._withStripped=!0},46:function(t,e,n){"use strict";n.r(e);var o=n(47),c=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=c.a},47:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n(11));function c(t){return t&&t.__esModule?t:{default:t}}var r=getApp().globalData,a={data:function(){return{isSearch:!1,result:[],value:"",hotCity:["银川市","灵武市","石嘴山市","吴忠市","固原市","中卫市"],history:[]}},computed:{curr_local:function(){return r.BASE_CONFIG.location.city}},onLoad:function(){this.history=this.getHistoryLocal()},onShow:function(){},methods:{inputHandle:function(t){var e=this,n=t.detail.value;n?o.default.getSuggestion({keyword:n,success:function(t){e.isSearch=!0,e.result=t.data},fail:function(t){console.info(t)}}):this.isSearch=!1},setLocal:function(e){var n=this.getHistoryLocal();n.includes(e)||(n.push(e),t.setStorageSync("history",n))},getHistoryLocal:function(){return t.getStorageSync("history")?t.getStorageSync("history"):[]},cancelHandle:function(){t.navigateBack()},selectItem:function(e){var n=e.currentTarget.dataset.res;console.log(n);var o={ad_info:{adcode:n.adcode},location:n.location,address_components:{city:n.city,district:n.district,street_number:n.address}};this.setGobalVar(o),t.navigateBack()},clearHandle:function(){this.value="",this.isSearch=!1,this.result=[]},clearHistory:function(){t.removeStorage({key:"history"}),this.history=[]},dwHandle:function(){var e=this;t.getSetting({success:function(n){n.authSetting["scope.userLocation"]?e.getLocal():t.authorize({scope:"scope.userLocation",success:function(){e.getLocal()},fail:function(){t.showModal({title:"用户未授权",content:"你拒绝了授权，无法获取定位，请删除小程序，重新加载后开启授权定位！",showCancel:!1,success:function(t){t.confirm&&console.log("用户点击确定")}})}})}})},hotHandle:function(e){var n=this,c=e.currentTarget.dataset.value;this.setLocal(c),o.default.geocoder({address:c,success:function(e){console.info(e),n.setGobalVar(e.result),t.navigateBack()}})},delHandle:function(e){var n=e.currentTarget.dataset.value,o=this.getLocal();if(o.includes(n)){var c=o.indexOf(n);o.splice(c,1),t.setStorageSync("history",o),this.history=o}},getLocal:function(){var e=this;t.getLocation({type:"wgs84",success:function(t){e.reverseGeocoder(t.latitude,t.longitude)}})},reverseGeocoder:function(e,n){var c=this;o.default.reverseGeocoder({location:{latitude:e,longitude:n},success:function(o){var a=o.result,i=a.ad_info.adcode,s=a.address_component,u=s.city,l=s.district;s.street_number;r.BASE_CONFIG.location.lon=n,r.BASE_CONFIG.location.lat=e,r.BASE_CONFIG.location.city="".concat(u).concat(l),r.BASE_CONFIG.location.curid=i.toString(),c.$store.dispatch("changeCurid",i.toString()),t.navigateBack()}})},setGobalVar:function(t){var e=t.ad_info.adcode,n=t.location,o=n.lng,c=n.lat,a=t.address_components,i=a.city,s=a.district;a.street_number;r.BASE_CONFIG.location.lon=o,r.BASE_CONFIG.location.lat=c,r.BASE_CONFIG.location.city="".concat(i).concat(s),r.BASE_CONFIG.location.curid=e.toString(),this.$store.dispatch("changeCurid",e.toString())}}};e.default=a}).call(this,n(1)["default"])},48:function(t,e,n){"use strict";n.r(e);var o=n(49),c=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=c.a},49:function(t,e,n){}},[[42,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/weather/search.js.map